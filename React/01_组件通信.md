# 组件之间的通信

---

## 一、父子组件通信

### 1. 父传子

```jsx
// Father组件
import React, { Component } from "react";
import Child from "./Child";

export class Father extends Component {
  constructor() {
    super();
    this.state = {
      name: "Father",
      age: 48,
    };
  }
  render() {
    const { name, age } = this.state;
    return (
      <div>
        <h1>
          我是Father组件--我的名字是：{name}--我的年龄是：{age}
        </h1>
        <Child name={name} age={age} />
        {/* 或者 */}
        <Child {...this.state} />
      </div>
    );
  }
}

export default Father;
```

```jsx
// Child组件
import React, { Component } from "react";

export class Child extends Component {
  render() {
    const { name, age } = this.props;
    return (
      <div>
        <h3>
          我是Child组件--父组件的名字是：{name}--父组件的年龄是：{age}
        </h3>
      </div>
    );
  }
}

export default Child;
```

### 2. 子传父

```jsx
// 父组件
import React, { Component } from "react";
import Child from "./Child";

export class Parent extends Component {
  constructor() {
    super();
    this.state = {
      info: null,
    };
  }
  parentEvent(info) {
    this.setState({
      info,
    });
  }

  render() {
    const { info } = this.state;
    return (
      <div>
        <h3>
          {info && (
            <p>
              子组件的信息：{info.name}--{info.age}
            </p>
          )}
        </h3>
        <Child parentEvent={(info) => this.parentEvent(info)} />
      </div>
    );
  }
}

export default Parent;

// 子组件
import React, { Component } from "react";

export class Child extends Component {
  constructor() {
    super();
    this.state = {
      info: {
        name: "Child",
        age: 25,
      },
    };
  }

  btnClick() {
    const { parentEvent } = this.props;
    parentEvent(this.state.info);
  }

  render() {
    return (
      <div>
        <h2>Child</h2>
        <button onClick={(e) => this.btnClick()}>ChildClick</button>
      </div>
    );
  }
}

export default Child;
```

---

## 二、非父子组件通信

